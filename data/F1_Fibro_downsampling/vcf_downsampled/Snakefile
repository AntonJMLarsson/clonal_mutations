FRACTIONS = [1.0,0.7,0.5,0.3,0.2,0.1,0.05,0.01]
## First download the files from zenodo (see README).
rule all:
    input: expand("CAST.SNPs.validated.chrX.{fraction}.vcf.gz.csi", fraction=FRACTIONS)

rule subsample:
    input: "../../zenodo/CAST.SNPs.validated.chrX.vcf.gz"
    output: "CAST.SNPs.validated.chrX.{fraction}.vcf"
    shell: "bcftools view {input} | vcfrandomsample -r {wildcards.fraction} > {output}"
rule compress:
    input: "CAST.SNPs.validated.chrX.{fraction}.vcf"
    output: "CAST.SNPs.validated.chrX.{fraction}.vcf.gz"
    shell: "bgzip {input}"
rule index:
    input: "CAST.SNPs.validated.chrX.{fraction}.vcf.gz"
    output: "CAST.SNPs.validated.chrX.{fraction}.vcf.gz.csi"
    shell: "bcftools index {input}"
